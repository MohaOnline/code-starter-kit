# å¯è§†åŒ–å…¬å¼ç¼–è¾‘å™¨é¡¹ç›®è¿½è¸ªæ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: å¯è§†åŒ–å…¬å¼ç¼–è¾‘å™¨æ¼”ç¤ºé¡µé¢  
**åˆ›å»ºæ—¶é—´**: 2024å¹´  
**é¡¹ç›®è·¯å¾„**: `/src/app/examples/mcp/basic/formula-editor/`  
**æŠ€æœ¯æ ˆ**: Next.js 15, React, TypeScript, KaTeX, Tailwind CSS, Shadcn UI  

## é¡¹ç›®ç›®æ ‡

åˆ›å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å¯è§†åŒ–æ•°å­¦å…¬å¼ç¼–è¾‘å™¨ï¼Œå±•ç¤ºç°ä»£ Web æŠ€æœ¯åœ¨æ•™è‚²å’Œç§‘å­¦è®¡ç®—é¢†åŸŸçš„åº”ç”¨ã€‚

### æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

- [x] **å®æ—¶ LaTeX é¢„è§ˆ** - ä½¿ç”¨ KaTeX è¿›è¡Œé«˜è´¨é‡æ•°å­¦å…¬å¼æ¸²æŸ“
- [x] **åˆ†ç±»ç¬¦å·é¢æ¿** - æŒ‰æ•°å­¦é¢†åŸŸç»„ç»‡çš„ç¬¦å·åº“ï¼ˆåŸºç¡€è¿ç®—ã€åˆ†æ•°æ ¹å¼ã€æŒ‡æ•°å¯¹æ•°ã€ä¸‰è§’å‡½æ•°ã€å¾®ç§¯åˆ†ã€å¸Œè…Šå­—æ¯ã€çŸ©é˜µå‘é‡ï¼‰
- [x] **é¢„è®¾å…¬å¼æ¨¡æ¿** - å¸¸ç”¨æ•°å­¦å…¬å¼çš„å¿«é€Ÿæ’å…¥ï¼ˆäºŒæ¬¡å…¬å¼ã€å‹¾è‚¡å®šç†ã€æ¬§æ‹‰å…¬å¼ç­‰ï¼‰
- [x] **å†å²è®°å½•åŠŸèƒ½** - æœ¬åœ°å­˜å‚¨ç”¨æˆ·ç¼–è¾‘çš„å…¬å¼å†å²
- [x] **å¯¼å‡ºåŠŸèƒ½** - LaTeX ä»£ç å¤åˆ¶å’Œå›¾ç‰‡å¯¼å‡ºï¼ˆåŸºç¡€å®ç°ï¼‰
- [x] **å“åº”å¼è®¾è®¡** - é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- [x] **é”™è¯¯å¤„ç†** - LaTeX è¯­æ³•é”™è¯¯çš„å‹å¥½æç¤º

### æŠ€æœ¯ç‰¹æ€§

- [x] **åŠ¨æ€åº“åŠ è½½** - æŒ‰éœ€åŠ è½½ KaTeX åº“ï¼Œä¼˜åŒ–é¦–å±æ€§èƒ½
- [x] **TypeScript ä¸¥æ ¼æ¨¡å¼** - å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ¥å£
- [x] **å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç†** - ä½¿ç”¨ React Hooks ç®¡ç†å¤æ‚çŠ¶æ€
- [x] **æœ¬åœ°æ•°æ®æŒä¹…åŒ–** - localStorage ä¿å­˜ç”¨æˆ·æ•°æ®
- [x] **æ— éšœç¢è®¾è®¡** - ç¬¦åˆ Web æ— éšœç¢æ ‡å‡†

## å®ç°è¿›åº¦

### âœ… å·²å®Œæˆ

#### 1. æ ¸å¿ƒé¡µé¢ç»„ä»¶ (`page.tsx`)
- **æ–‡ä»¶è·¯å¾„**: `/src/app/examples/mcp/basic/formula-editor/page.tsx`
- **ç»„ä»¶ç±»å‹**: å®¢æˆ·ç«¯ç»„ä»¶ (`'use client'`)
- **ä¸»è¦åŠŸèƒ½**:
  - å®Œæ•´çš„å…¬å¼ç¼–è¾‘å™¨ç•Œé¢
  - å®æ—¶ LaTeX æ¸²æŸ“å’Œé¢„è§ˆ
  - åˆ†ç±»ç¬¦å·é¢æ¿ï¼ˆ7ä¸ªæ•°å­¦é¢†åŸŸåˆ†ç±»ï¼‰
  - 6ä¸ªé¢„è®¾å…¬å¼æ¨¡æ¿
  - å†å²è®°å½•ç®¡ç†ï¼ˆæœ€å¤šä¿å­˜10æ¡ï¼‰
  - å·¥å…·æ åŠŸèƒ½ï¼ˆä¿å­˜ã€å¤åˆ¶ã€å¯¼å‡ºã€æ¸…ç©ºï¼‰

#### 2. æ•°æ®ç»“æ„è®¾è®¡
- **ç¬¦å·åˆ†ç±»ç³»ç»Ÿ**: 7ä¸ªä¸»è¦æ•°å­¦é¢†åŸŸï¼Œå…±50+ä¸ªå¸¸ç”¨ç¬¦å·
- **å…¬å¼æ¨¡æ¿åº“**: 6ä¸ªç»å…¸æ•°å­¦å…¬å¼
- **ç±»å‹å®šä¹‰**: å®Œæ•´çš„ TypeScript æ¥å£

#### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **åŠ è½½çŠ¶æ€**: KaTeX åº“åŠ è½½è¿›åº¦æç¤º
- **é”™è¯¯å¤„ç†**: LaTeX è¯­æ³•é”™è¯¯çš„å®æ—¶åé¦ˆ
- **å…‰æ ‡ç®¡ç†**: ç¬¦å·æ’å…¥åä¿æŒå…‰æ ‡ä½ç½®
- **å“åº”å¼å¸ƒå±€**: ç§»åŠ¨ç«¯å‹å¥½çš„ç½‘æ ¼å¸ƒå±€

#### 4. æ€§èƒ½ä¼˜åŒ–
- **åŠ¨æ€å¯¼å…¥**: KaTeX åº“æŒ‰éœ€åŠ è½½
- **æœ¬åœ°ç¼“å­˜**: å†å²è®°å½•æœ¬åœ°å­˜å‚¨
- **é˜²æŠ–æ¸²æŸ“**: é¿å…é¢‘ç¹é‡æ–°æ¸²æŸ“

## æŠ€æœ¯å®ç°ç»†èŠ‚

### KaTeX é›†æˆ

```typescript
// åŠ¨æ€åŠ è½½ KaTeX åº“
const loadKatex = async () => {
  // CSS æ ·å¼è¡¨
  const link = document.createElement('link');
  link.rel = 'stylesheet';
  link.href = 'https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css';
  
  // JavaScript åº“
  const script = document.createElement('script');
  script.src = 'https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js';
};
```

### ç¬¦å·åˆ†ç±»ç³»ç»Ÿ

```typescript
const SYMBOL_CATEGORIES = {
  basic: { name: 'åŸºç¡€è¿ç®—', symbols: [...] },
  fractions: { name: 'åˆ†æ•°ä¸æ ¹å¼', symbols: [...] },
  powers: { name: 'æŒ‡æ•°ä¸å¯¹æ•°', symbols: [...] },
  trigonometry: { name: 'ä¸‰è§’å‡½æ•°', symbols: [...] },
  calculus: { name: 'å¾®ç§¯åˆ†', symbols: [...] },
  greek: { name: 'å¸Œè…Šå­—æ¯', symbols: [...] },
  matrices: { name: 'çŸ©é˜µä¸å‘é‡', symbols: [...] }
};
```

### çŠ¶æ€ç®¡ç†

```typescript
const [latexCode, setLatexCode] = useState<string>('E = mc^2');
const [history, setHistory] = useState<string[]>([]);
const [activeCategory, setActiveCategory] = useState<string>('basic');
const [isKatexLoaded, setIsKatexLoaded] = useState<boolean>(false);
const [renderError, setRenderError] = useState<string>('');
```

## å¾…ä¼˜åŒ–é¡¹ç›®

### ğŸ”„ å¯èƒ½çš„æ”¹è¿›

1. **å›¾ç‰‡å¯¼å‡ºåŠŸèƒ½**
   - é›†æˆ `html2canvas` åº“
   - æ”¯æŒ PNG/SVG æ ¼å¼å¯¼å‡º
   - è‡ªå®šä¹‰å¯¼å‡ºå°ºå¯¸å’Œåˆ†è¾¨ç‡

2. **å…¬å¼åº“æ‰©å±•**
   - æ›´å¤šæ•°å­¦é¢†åŸŸçš„ç¬¦å·
   - ç”¨æˆ·è‡ªå®šä¹‰ç¬¦å·å’Œæ¨¡æ¿
   - å…¬å¼åˆ†äº«å’Œå¯¼å…¥åŠŸèƒ½

3. **ç¼–è¾‘å™¨å¢å¼º**
   - è¯­æ³•é«˜äº®
   - è‡ªåŠ¨è¡¥å…¨
   - æ‹¬å·åŒ¹é…
   - æ’¤é”€/é‡åšåŠŸèƒ½

4. **åä½œåŠŸèƒ½**
   - å®æ—¶åä½œç¼–è¾‘
   - å…¬å¼è¯„è®ºå’Œæ ‡æ³¨
   - ç‰ˆæœ¬å†å²ç®¡ç†

5. **æ€§èƒ½ä¼˜åŒ–**
   - è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§é‡ç¬¦å·æ—¶ï¼‰
   - Web Workers æ¸²æŸ“
   - ç¼“å­˜ä¼˜åŒ–

## æŠ€æœ¯æ–‡æ¡£

### ä¾èµ–åº“

- **KaTeX**: æ•°å­¦å…¬å¼æ¸²æŸ“å¼•æ“
  - ç‰ˆæœ¬: 0.16.8
  - æ–‡æ¡£: https://katex.org/docs/
  - ä¼˜åŠ¿: å¿«é€Ÿã€è½»é‡ã€æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒ

- **Shadcn UI**: ç°ä»£ React ç»„ä»¶åº“
  - ç»„ä»¶: Button, Card, Input, Textarea, Badge
  - æ ·å¼: Tailwind CSS åŸºç¡€

- **Lucide React**: å›¾æ ‡åº“
  - ä½¿ç”¨å›¾æ ‡: Copy, Download, RefreshCw, Trash2

### æµè§ˆå™¨å…¼å®¹æ€§

- **ç°ä»£æµè§ˆå™¨**: Chrome 88+, Firefox 85+, Safari 14+
- **ç§»åŠ¨ç«¯**: iOS Safari 14+, Chrome Mobile 88+
- **ç‰¹æ€§è¦æ±‚**: ES2020, CSS Grid, Flexbox

### æ€§èƒ½æŒ‡æ ‡

- **é¦–å±åŠ è½½**: < 2s (åŒ…å« KaTeX åº“)
- **å…¬å¼æ¸²æŸ“**: < 100ms (ç®€å•å…¬å¼)
- **å†…å­˜ä½¿ç”¨**: < 50MB (åŒ…å«å†å²è®°å½•)

## éƒ¨ç½²è¯´æ˜

### å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—®é¡µé¢
http://localhost:3000/examples/mcp/basic/formula-editor
```

### ç”Ÿäº§ç¯å¢ƒ

```bash
# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- Next.js 15
- ç°ä»£æµè§ˆå™¨æ”¯æŒ

## æ€»ç»“

æœ¬é¡¹ç›®æˆåŠŸå®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å¯è§†åŒ–å…¬å¼ç¼–è¾‘å™¨ï¼Œå±•ç¤ºäº†ç°ä»£ Web æŠ€æœ¯åœ¨æ•°å­¦æ•™è‚²å’Œç§‘å­¦è®¡ç®—é¢†åŸŸçš„åº”ç”¨æ½œåŠ›ã€‚é€šè¿‡ React çš„ç»„ä»¶åŒ–æ¶æ„ã€TypeScript çš„ç±»å‹å®‰å…¨ã€KaTeX çš„é«˜è´¨é‡æ¸²æŸ“ï¼Œä»¥åŠ Tailwind CSS çš„ç°ä»£æ ·å¼ï¼Œåˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·å‹å¥½ä¸”åŠŸèƒ½å¼ºå¤§çš„æ•°å­¦å…¬å¼ç¼–è¾‘å·¥å…·ã€‚

é¡¹ç›®ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šè¯¦ç»†ï¼Œä¾¿äºåç»­ç»´æŠ¤å’ŒåŠŸèƒ½æ‰©å±•ã€‚æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å‡å·²å®ç°å¹¶ç»è¿‡æµ‹è¯•ï¼Œå¯ä»¥ä½œä¸ºæ•™è‚²å·¥å…·æˆ–å…¶ä»–æ•°å­¦åº”ç”¨çš„åŸºç¡€ç»„ä»¶ä½¿ç”¨ã€‚