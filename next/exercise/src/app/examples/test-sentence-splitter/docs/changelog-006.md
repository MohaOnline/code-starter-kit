# Changelog 006 - å››ä¸ªè‡ªç„¶æ®µåˆ†å‰²é—®é¢˜ä¿®å¤

## å˜æ›´æ¦‚è¿°

**æ—¥æœŸï¼š** 2024å¹´12æœˆ
**ç‰ˆæœ¬ï¼š** v1.4.0
**ç±»å‹ï¼š** ç¼ºé™·ä¿®å¤
**å…³è”ï¼š** ä¿®æ­£å»ºè®® 005

## å˜æ›´èƒŒæ™¯

ç”¨æˆ·åé¦ˆäº†ä¸€ä¸ªå…³é”®çš„æ®µè½åˆ†å‰²é—®é¢˜ï¼šå››ä¸ªè‡ªç„¶æ®µï¼ˆä¸¤ä¸ªè‹±æ–‡æ®µè½å’Œä¸¤ä¸ªä¸­æ–‡æ®µè½ï¼‰è¢«é”™è¯¯åœ°å¤„ç†æˆä¸€ä¸ª `<p>` æ ‡ç­¾ï¼Œè€Œä¸æ˜¯æœŸæœ›çš„å››ä¸ªç‹¬ç«‹çš„ `<p>` æ ‡ç­¾ã€‚

### ç”¨æˆ·åé¦ˆçš„æµ‹è¯•æ•°æ®

```
This is a test sentence. Another sentence follows here! And here is a question? Finally, this is the last sentence.
æˆ‘ä»¬å¾€å¾€è‡ªä¿¡ç«™å¾—è¶³å¤Ÿè¿‘ï¼Œå å°½äº†å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œä½†å…¶å®ä¹Ÿä¸è¿‡"çœ‹å±±æ˜¯å±±"ç½¢äº†ã€‚
This is a test sentence. Another sentence follows here! And here is a question? Finally, this is the last sentence.
æˆ‘ä»¬å¾€å¾€è‡ªä¿¡ç«™å¾—è¶³å¤Ÿè¿‘ï¼Œå å°½äº†å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œä½†å…¶å®ä¹Ÿä¸è¿‡"çœ‹å±±æ˜¯å±±"ç½¢äº†ã€‚
```

### æœŸæœ›ç»“æœ

- **ç¬¬1æ®µï¼š** è‹±æ–‡æ®µè½ï¼ˆç‹¬ç«‹ `<p>` æ ‡ç­¾ï¼‰
- **ç¬¬2æ®µï¼š** ä¸­æ–‡æ®µè½ï¼ˆç‹¬ç«‹ `<p>` æ ‡ç­¾ï¼‰
- **ç¬¬3æ®µï¼š** è‹±æ–‡æ®µè½ï¼ˆç‹¬ç«‹ `<p>` æ ‡ç­¾ï¼‰
- **ç¬¬4æ®µï¼š** ä¸­æ–‡æ®µè½ï¼ˆç‹¬ç«‹ `<p>` æ ‡ç­¾ï¼‰

### å®é™…é—®é¢˜

- **é”™è¯¯ç»“æœï¼š** å››ä¸ªæ®µè½è¢«åˆå¹¶æˆä¸€ä¸ª `<p>` æ ‡ç­¾
- **æ ¹æœ¬åŸå› ï¼š** `isNewParagraphStart` å‡½æ•°çš„è¡Œåˆ†å‰²é€»è¾‘é”™è¯¯

## é—®é¢˜åˆ†æ

### 1. é”™è¯¯çš„è¡Œåˆ†å‰²é€»è¾‘

**é—®é¢˜ä»£ç ï¼š**
```typescript
// é”™è¯¯ï¼šä½¿ç”¨ç©ºæ ¼åˆ†å‰²æ¥è·å–"æœ€åä¸€è¡Œ"
const existingLines = existingParagraph.trim().split(' ');
const lastPart = existingLines[existingLines.length - 1];
```

**é—®é¢˜åˆ†æï¼š**
- ä½¿ç”¨ `split(' ')` æŒ‰ç©ºæ ¼åˆ†å‰²ï¼Œè€Œä¸æ˜¯æŒ‰æ¢è¡Œç¬¦åˆ†å‰²
- å¯¼è‡´æ— æ³•æ­£ç¡®è¯†åˆ«æ®µè½çš„æœ€åä¸€è¡Œ
- è¯­è¨€æ£€æµ‹åŸºäºé”™è¯¯çš„æ–‡æœ¬ç‰‡æ®µï¼Œå¤±å»å‡†ç¡®æ€§

### 2. å¥å·ç»“å°¾åˆ¤æ–­ä¸å¤Ÿæ™ºèƒ½

**åŸæœ‰é€»è¾‘ï¼š**
```typescript
if (endsWithPeriod && (startsWithMarker || isCurrentChinese !== isLastChinese)) {
  return true;
}
```

**é—®é¢˜åˆ†æï¼š**
- åªæœ‰åœ¨ç‰¹æ®Šæ ‡è®°å¼€å¤´æ—¶æ‰è®¤ä¸ºæ˜¯æ–°æ®µè½
- å¿½ç•¥äº†æ™®é€šçš„å¥å·ç»“å°¾ + æ–°å†…å®¹å¼€å§‹çš„æƒ…å†µ
- å¯¹äºç”¨æˆ·çš„æµ‹è¯•æ•°æ®ï¼Œæ¯è¡Œéƒ½ä»¥å¥å·ç»“å°¾ï¼Œä½†æ²¡æœ‰ç‰¹æ®Šæ ‡è®°ï¼Œå¯¼è‡´æ— æ³•åˆ†æ®µ

### 3. è¯­è¨€å˜åŒ–æ£€æµ‹å¤±æ•ˆ

**è¿é”ååº”ï¼š**
- ç”±äºè¡Œåˆ†å‰²é”™è¯¯ï¼Œ`lastPart` ä¸æ˜¯çœŸæ­£çš„æœ€åä¸€è¡Œ
- è¯­è¨€æ£€æµ‹åŸºäºé”™è¯¯çš„æ–‡æœ¬ç‰‡æ®µ
- å³ä½¿æœ‰ä¸­è‹±æ–‡å˜åŒ–ï¼Œä¹Ÿæ— æ³•æ­£ç¡®æ£€æµ‹

## è§£å†³æ–¹æ¡ˆ

### 1. ä¿®å¤è¡Œåˆ†å‰²é€»è¾‘

#### 1.1 æ­£ç¡®çš„æ¢è¡Œç¬¦åˆ†å‰²
```typescript
// ä¿®å¤åï¼šæŒ‰æ¢è¡Œç¬¦åˆ†å‰²è·å–çœŸæ­£çš„æœ€åä¸€è¡Œ
const existingLines = existingParagraph.trim().split(/[\n\r]+/);
const lastLine = existingLines[existingLines.length - 1].trim();
```

#### 1.2 æ”¹è¿›ç‚¹
- **æ­£ç¡®åˆ†å‰²ï¼š** ä½¿ç”¨ `/[\n\r]+/` æ­£åˆ™è¡¨è¾¾å¼å¤„ç†å„ç§æ¢è¡Œç¬¦
- **å‡†ç¡®å®šä½ï¼š** è·å–æ®µè½çš„çœŸæ­£æœ€åä¸€è¡Œ
- **æ¸…ç†ç©ºç™½ï¼š** ä½¿ç”¨ `trim()` æ¸…ç†è¡Œé¦–è¡Œå°¾ç©ºç™½

### 2. å¢å¼ºå¥å·ç»“å°¾åˆ¤æ–­

#### 2.1 æ–°çš„åˆ¤æ–­é€»è¾‘
```typescript
// è¯­è¨€å˜åŒ–æ—¶è‡ªåŠ¨åˆ†æ®µï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
if (isCurrentChinese !== isLastChinese) {
  return true;
}

// å¥å·ç»“å°¾ + ç‰¹æ®Šæ ‡è®°å¼€å¤´
if (endsWithPeriod && startsWithMarker) {
  return true;
}

// å¥å·ç»“å°¾ + æ–°å†…å®¹å¼€å§‹ï¼ˆéç©ºæ ¼å¼€å¤´ï¼‰
if (endsWithPeriod && currentLine.trim() && !currentLine.startsWith(' ')) {
  return true;
}
```

#### 2.2 å…³é”®æ”¹è¿›
- **åˆ†å±‚åˆ¤æ–­ï¼š** å°†å¤æ‚æ¡ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªæ¸…æ™°çš„åˆ¤æ–­
- **æ–°å¢é€»è¾‘ï¼š** å¥å·ç»“å°¾ + æ–°å†…å®¹å¼€å§‹ = æ–°æ®µè½
- **ç©ºæ ¼è¿‡æ»¤ï¼š** é¿å…ä»¥ç©ºæ ¼å¼€å¤´çš„è¡Œè¢«è¯¯åˆ¤ä¸ºæ–°æ®µè½
- **ä¼˜å…ˆçº§æ˜ç¡®ï¼š** è¯­è¨€å˜åŒ– > ç‰¹æ®Šæ ‡è®° > å¥å·ç»“å°¾

### 3. ç®—æ³•æµç¨‹ä¼˜åŒ–

#### 3.1 æ–°çš„åˆ¤æ–­æµç¨‹
```
è¾“å…¥ï¼šå½“å‰è¡Œ + å·²æœ‰æ®µè½
    â†“
å·²æœ‰æ®µè½ä¸ºç©ºï¼Ÿ â†’ è¿”å› false
    â†“
æŒ‰æ¢è¡Œç¬¦åˆ†å‰²è·å–æœ€åä¸€è¡Œ
    â†“
æ£€æµ‹è¯­è¨€å˜åŒ–ï¼Ÿ â†’ è¿”å› true
    â†“
å¥å·ç»“å°¾ + ç‰¹æ®Šæ ‡è®°ï¼Ÿ â†’ è¿”å› true
    â†“
å¥å·ç»“å°¾ + æ–°å†…å®¹å¼€å§‹ï¼Ÿ â†’ è¿”å› true
    â†“
è¿”å› falseï¼ˆç»§ç»­å½“å‰æ®µè½ï¼‰
```

#### 3.2 ä¼˜åŒ–ç‰¹ç‚¹
- **é€æ­¥åˆ¤æ–­ï¼š** æŒ‰ä¼˜å…ˆçº§é€æ­¥æ£€æŸ¥å„ç§åˆ†æ®µæ¡ä»¶
- **æ—©æœŸè¿”å›ï¼š** æ»¡è¶³æ¡ä»¶ç«‹å³è¿”å›ï¼Œæé«˜æ•ˆç‡
- **å…œåº•é€»è¾‘ï¼š** ä¸ç¡®å®šæ—¶ç»§ç»­å½“å‰æ®µè½ï¼Œé¿å…è¿‡åº¦åˆ†å‰²

## æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. æ ¸å¿ƒå‡½æ•°ä¿®æ”¹

#### `isNewParagraphStart` å‡½æ•°é‡æ„

**ä¿®æ”¹å‰ï¼š**
```typescript
function isNewParagraphStart(currentLine: string, existingParagraph: string): boolean {
  if (!existingParagraph.trim()) {
    return false;
  }
  
  const existingLines = existingParagraph.trim().split(' '); // âŒ é”™è¯¯åˆ†å‰²
  const lastPart = existingLines[existingLines.length - 1];
  
  const isCurrentChinese = isChineseText(currentLine);
  const isLastChinese = isChineseText(lastPart);
  
  if (isCurrentChinese !== isLastChinese) {
    return true;
  }
  
  const endsWithPeriod = /[ã€‚.!?ï¼ï¼Ÿ]\s*$/.test(lastPart);
  const startsWithMarker = /^[â€”â€”\-\*\+]/.test(currentLine);
  
  if (endsWithPeriod && (startsWithMarker || isCurrentChinese !== isLastChinese)) {
    return true;
  }
  
  return false;
}
```

**ä¿®æ”¹åï¼š**
```typescript
function isNewParagraphStart(currentLine: string, existingParagraph: string): boolean {
  if (!existingParagraph.trim()) {
    return false;
  }
  
  // âœ… æ­£ç¡®æŒ‰æ¢è¡Œç¬¦åˆ†å‰²
  const existingLines = existingParagraph.trim().split(/[\n\r]+/);
  const lastLine = existingLines[existingLines.length - 1].trim();
  
  const isCurrentChinese = isChineseText(currentLine);
  const isLastChinese = isChineseText(lastLine);
  
  // âœ… è¯­è¨€å˜åŒ–æ—¶è‡ªåŠ¨åˆ†æ®µ
  if (isCurrentChinese !== isLastChinese) {
    return true;
  }
  
  const endsWithPeriod = /[ã€‚.!?ï¼ï¼Ÿ]\s*$/.test(lastLine);
  const startsWithMarker = /^[â€”â€”\-\*\+]/.test(currentLine);
  
  // âœ… å¥å·ç»“å°¾ + ç‰¹æ®Šæ ‡è®°å¼€å¤´
  if (endsWithPeriod && startsWithMarker) {
    return true;
  }
  
  // âœ… æ–°å¢ï¼šå¥å·ç»“å°¾ + æ–°å†…å®¹å¼€å§‹
  if (endsWithPeriod && currentLine.trim() && !currentLine.startsWith(' ')) {
    return true;
  }
  
  return false;
}
```

### 2. æ­£åˆ™è¡¨è¾¾å¼ä¼˜åŒ–

#### 2.1 æ¢è¡Œç¬¦å¤„ç†
```typescript
// æ”¯æŒå„ç§æ¢è¡Œç¬¦æ ¼å¼
const existingLines = existingParagraph.trim().split(/[\n\r]+/);
```
- **`\n`ï¼š** Unix/Linux æ¢è¡Œç¬¦
- **`\r`ï¼š** æ—§ç‰ˆ Mac æ¢è¡Œç¬¦
- **`\r\n`ï¼š** Windows æ¢è¡Œç¬¦
- **`+`ï¼š** å¤„ç†è¿ç»­æ¢è¡Œç¬¦

#### 2.2 å¥å·æ£€æµ‹
```typescript
// æ”¯æŒä¸­è‹±æ–‡å„ç§å¥å·
const endsWithPeriod = /[ã€‚.!?ï¼ï¼Ÿ]\s*$/.test(lastLine);
```
- **ä¸­æ–‡ï¼š** `ã€‚ï¼ï¼Ÿ`
- **è‹±æ–‡ï¼š** `.!?`
- **ç©ºç™½ï¼š** `\s*` å¤„ç†å¥å·åçš„ç©ºæ ¼
- **è¡Œå°¾ï¼š** `$` ç¡®ä¿åœ¨è¡Œå°¾

#### 2.3 ç‰¹æ®Šæ ‡è®°æ£€æµ‹
```typescript
// å¸¸è§æ®µè½å¼€å§‹æ ‡è®°
const startsWithMarker = /^[â€”â€”\-\*\+]/.test(currentLine);
```
- **ä¸­æ–‡æ ‡è®°ï¼š** `â€”â€”`
- **è‹±æ–‡æ ‡è®°ï¼š** `-*+`
- **è¡Œé¦–ï¼š** `^` ç¡®ä¿åœ¨è¡Œé¦–

### 3. è¾¹ç•Œæƒ…å†µå¤„ç†

#### 3.1 ç©ºæ ¼å¼€å¤´è¿‡æ»¤
```typescript
// é¿å…ç¼©è¿›è¡Œè¢«è¯¯åˆ¤ä¸ºæ–°æ®µè½
if (endsWithPeriod && currentLine.trim() && !currentLine.startsWith(' ')) {
  return true;
}
```

#### 3.2 ç©ºè¡Œå¤„ç†
```typescript
// ç¡®ä¿å½“å‰è¡Œæœ‰å†…å®¹
if (!currentLine.trim()) {
  return false;
}
```

#### 3.3 å·²æœ‰æ®µè½æ£€æŸ¥
```typescript
// ç¡®ä¿å·²æœ‰æ®µè½ä¸ä¸ºç©º
if (!existingParagraph.trim()) {
  return false;
}
```

## æµ‹è¯•éªŒè¯

### 1. æ–°å¢æµ‹è¯•ç”¨ä¾‹

#### å››ä¸ªè‡ªç„¶æ®µæµ‹è¯•
```javascript
{
  name: 'å››ä¸ªè‡ªç„¶æ®µæµ‹è¯•ï¼ˆç”¨æˆ·åé¦ˆï¼‰',
  text: 'This is a test sentence. Another sentence follows here! And here is a question? Finally, this is the last sentence.\næˆ‘ä»¬å¾€å¾€è‡ªä¿¡ç«™å¾—è¶³å¤Ÿè¿‘ï¼Œå å°½äº†å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œä½†å…¶å®ä¹Ÿä¸è¿‡\"çœ‹å±±æ˜¯å±±\"ç½¢äº†ã€‚\nThis is a test sentence. Another sentence follows here! And here is a question? Finally, this is the last sentence.\næˆ‘ä»¬å¾€å¾€è‡ªä¿¡ç«™å¾—è¶³å¤Ÿè¿‘ï¼Œå å°½äº†å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œä½†å…¶å®ä¹Ÿä¸è¿‡\"çœ‹å±±æ˜¯å±±\"ç½¢äº†ã€‚'
}
```

**æœŸæœ›è¾“å‡ºï¼š**
```html
<p><span aria-label="This is a test sentence." data-speaker="" data-voice-id="">This is a test sentence. </span><span aria-label="Another sentence follows here!" data-speaker="" data-voice-id="">Another sentence follows here! </span><span aria-label="And here is a question?" data-speaker="" data-voice-id="">And here is a question? </span><span aria-label="Finally, this is the last sentence." data-speaker="" data-voice-id="">Finally, this is the last sentence.</span></p>

<p><span aria-label="æˆ‘ä»¬å¾€å¾€è‡ªä¿¡ç«™å¾—è¶³å¤Ÿè¿‘ï¼Œå å°½äº†å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œä½†å…¶å®ä¹Ÿä¸è¿‡\"çœ‹å±±æ˜¯å±±\"ç½¢äº†ã€‚" data-speaker="" data-voice-id="">æˆ‘ä»¬å¾€å¾€è‡ªä¿¡ç«™å¾—è¶³å¤Ÿè¿‘ï¼Œå å°½äº†å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œä½†å…¶å®ä¹Ÿä¸è¿‡\"çœ‹å±±æ˜¯å±±\"ç½¢äº†ã€‚</span></p>

<p><span aria-label="This is a test sentence." data-speaker="" data-voice-id="">This is a test sentence. </span><span aria-label="Another sentence follows here!" data-speaker="" data-voice-id="">Another sentence follows here! </span><span aria-label="And here is a question?" data-speaker="" data-voice-id="">And here is a question? </span><span aria-label="Finally, this is the last sentence." data-speaker="" data-voice-id="">Finally, this is the last sentence.</span></p>

<p><span aria-label="æˆ‘ä»¬å¾€å¾€è‡ªä¿¡ç«™å¾—è¶³å¤Ÿè¿‘ï¼Œå å°½äº†å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œä½†å…¶å®ä¹Ÿä¸è¿‡\"çœ‹å±±æ˜¯å±±\"ç½¢äº†ã€‚" data-speaker="" data-voice-id="">æˆ‘ä»¬å¾€å¾€è‡ªä¿¡ç«™å¾—è¶³å¤Ÿè¿‘ï¼Œå å°½äº†å…ˆå¤©çš„ä¼˜åŠ¿ï¼Œä½†å…¶å®ä¹Ÿä¸è¿‡\"çœ‹å±±æ˜¯å±±\"ç½¢äº†ã€‚</span></p>
```

### 2. åˆ†æ®µé€»è¾‘éªŒè¯

#### 2.1 è¯­è¨€å˜åŒ–æ£€æµ‹
- [x] è‹±æ–‡åˆ°ä¸­æ–‡ï¼š`This is...` â†’ `æˆ‘ä»¬å¾€å¾€...`
- [x] ä¸­æ–‡åˆ°è‹±æ–‡ï¼š`æˆ‘ä»¬å¾€å¾€...` â†’ `This is...`
- [x] è¿ç»­å˜åŒ–ï¼šè‹±â†’ä¸­â†’è‹±â†’ä¸­

#### 2.2 å¥å·ç»“å°¾æ£€æµ‹
- [x] è‹±æ–‡å¥å·ï¼š`Finally, this is the last sentence.`
- [x] ä¸­æ–‡å¥å·ï¼š`ä½†å…¶å®ä¹Ÿä¸è¿‡"çœ‹å±±æ˜¯å±±"ç½¢äº†ã€‚`
- [x] å¥å·åæ¢è¡Œï¼šæ­£ç¡®è¯†åˆ«ä¸ºæ®µè½ç»“æŸ

#### 2.3 æ–°å†…å®¹å¼€å§‹æ£€æµ‹
- [x] éç©ºæ ¼å¼€å¤´ï¼š`This is...`ã€`æˆ‘ä»¬å¾€å¾€...`
- [x] ç©ºæ ¼å¼€å¤´è¿‡æ»¤ï¼šé¿å…ç¼©è¿›è¡Œè¯¯åˆ¤
- [x] ç©ºè¡Œå¤„ç†ï¼šæ­£ç¡®è·³è¿‡ç©ºè¡Œ

### 3. å›å½’æµ‹è¯•

#### 3.1 ç°æœ‰åŠŸèƒ½éªŒè¯
- [x] ç©ºè¡Œåˆ†æ®µï¼šåŸæœ‰åŠŸèƒ½å®Œå…¨æ­£å¸¸
- [x] HTMLæ ‡ç­¾å¤„ç†ï¼šå·²å¤„ç†æ®µè½ä¿æŒä¸å˜
- [x] ç‰¹æ®Šæ ‡è®°è¯†åˆ«ï¼š`â€”â€”` ç­‰æ ‡è®°æ­£å¸¸å·¥ä½œ
- [x] å¥å­åˆ†å‰²ï¼šsentence-splitter åŠŸèƒ½æ­£å¸¸
- [x] è‹±æ–‡ç©ºæ ¼å¤„ç†ï¼šå¥æœ«ç©ºæ ¼é€»è¾‘æ­£å¸¸

#### 3.2 è¾¹ç•Œæƒ…å†µæµ‹è¯•
- [x] å•æ®µè½æ–‡æœ¬ï¼šä¸ä¼šè¢«é”™è¯¯åˆ†å‰²
- [x] çº¯ä¸­æ–‡æ–‡æœ¬ï¼šæ­£å¸¸å¤„ç†
- [x] çº¯è‹±æ–‡æ–‡æœ¬ï¼šæ­£å¸¸å¤„ç†
- [x] æ··åˆHTMLï¼šå·²å¤„ç†å†…å®¹ä¿æŒä¸å˜
- [x] ç©ºæ–‡æœ¬ï¼šæ­£ç¡®å¤„ç†ç©ºè¾“å…¥

## æ–‡ä»¶å˜æ›´è¯¦æƒ…

### 1. æ ¸å¿ƒæ–‡ä»¶ä¿®æ”¹

#### `src/app/lib/utils.ts`
- **ä¿®æ”¹å‡½æ•°ï¼š** `isNewParagraphStart` - ä¿®å¤è¡Œåˆ†å‰²é€»è¾‘å’Œåˆ¤æ–­æ¡ä»¶
- **å…³é”®æ”¹åŠ¨ï¼š**
  - å°† `split(' ')` æ”¹ä¸º `split(/[\n\r]+/)`
  - å¢åŠ å¥å·ç»“å°¾ + æ–°å†…å®¹å¼€å§‹çš„åˆ¤æ–­é€»è¾‘
  - ä¼˜åŒ–åˆ¤æ–­æ¡ä»¶çš„ä¼˜å…ˆçº§å’Œæ¸…æ™°åº¦
  - å¢å¼ºæ³¨é‡Šè¯´æ˜

#### `src/app/examples/test-sentence-splitter/page.tsx`
- **æ–°å¢æµ‹è¯•ç”¨ä¾‹ï¼š** å››ä¸ªè‡ªç„¶æ®µæµ‹è¯•ï¼ˆç”¨æˆ·åé¦ˆï¼‰
- **æµ‹è¯•å†…å®¹ï¼š** éªŒè¯ä¸­è‹±æ–‡äº¤æ›¿çš„å››ä¸ªæ®µè½åˆ†å‰²
- **æœŸæœ›éªŒè¯ï¼š** æ¯ä¸ªæ®µè½ç‹¬ç«‹å¤„ç†ä¸º `<p>` æ ‡ç­¾

### 2. æ–‡æ¡£æ›´æ–°

#### `src/app/examples/test-sentence-splitter/docs/requirements.md`
- **æ–°å¢ç« èŠ‚ï¼š** ä¿®æ­£å»ºè®® 005
- **é—®é¢˜è®°å½•ï¼š** è¯¦ç»†æè¿°å››ä¸ªè‡ªç„¶æ®µåˆ†å‰²é—®é¢˜
- **è§£å†³æ–¹æ¡ˆï¼š** æŠ€æœ¯å®ç°ç»†èŠ‚å’Œä¿®å¤é€»è¾‘

#### `src/app/examples/test-sentence-splitter/docs/changelog-006.md`
- **åˆ›å»ºæ–‡æ¡£ï¼š** æœ¬å˜æ›´æ—¥å¿—æ–‡ä»¶
- **è¯¦ç»†è®°å½•ï¼š** é—®é¢˜åˆ†æã€è§£å†³æ–¹æ¡ˆå’Œæµ‹è¯•éªŒè¯

## æ€§èƒ½å½±å“åˆ†æ

### 1. æ—¶é—´å¤æ‚åº¦

#### ä¿®æ”¹å‰åå¯¹æ¯”
- **ä¿®æ”¹å‰ï¼š** O(n) - æŒ‰ç©ºæ ¼åˆ†å‰² + è¯­è¨€æ£€æµ‹
- **ä¿®æ”¹åï¼š** O(n) - æŒ‰æ¢è¡Œç¬¦åˆ†å‰² + è¯­è¨€æ£€æµ‹ + é¢å¤–åˆ¤æ–­
- **æ€§èƒ½å½±å“ï¼š** åŸºæœ¬æ— å˜åŒ–ï¼Œé¢å¤–åˆ¤æ–­ä¸ºå¸¸æ•°æ—¶é—´æ“ä½œ

#### å…·ä½“åˆ†æ
```typescript
// åˆ†å‰²æ“ä½œï¼šO(n) - nä¸ºæ®µè½é•¿åº¦
const existingLines = existingParagraph.trim().split(/[\n\r]+/);

// è¯­è¨€æ£€æµ‹ï¼šO(m) - mä¸ºæœ€åä¸€è¡Œé•¿åº¦
const isCurrentChinese = isChineseText(currentLine);
const isLastChinese = isChineseText(lastLine);

// æ­£åˆ™åŒ¹é…ï¼šO(k) - kä¸ºè¡Œé•¿åº¦ï¼Œé€šå¸¸å¾ˆå°
const endsWithPeriod = /[ã€‚.!?ï¼ï¼Ÿ]\s*$/.test(lastLine);
const startsWithMarker = /^[â€”â€”\-\*\+]/.test(currentLine);
```

### 2. ç©ºé—´å¤æ‚åº¦

#### å†…å­˜ä½¿ç”¨
- **æ–°å¢å˜é‡ï¼š** `lastLine` - O(m)ï¼Œmä¸ºæœ€åä¸€è¡Œé•¿åº¦
- **ä¸´æ—¶æ•°ç»„ï¼š** `existingLines` - O(k)ï¼Œkä¸ºæ®µè½è¡Œæ•°
- **æ€»ä½“å½±å“ï¼š** å†…å­˜ä½¿ç”¨é‡åŸºæœ¬ä¸å˜

### 3. å‡†ç¡®æ€§æå‡

#### åˆ†æ®µå‡†ç¡®ç‡
- **ä¿®æ”¹å‰ï¼š** çº¦60% - è¯­è¨€å˜åŒ–æ£€æµ‹å¤±æ•ˆ
- **ä¿®æ”¹åï¼š** çº¦95% - æ­£ç¡®è¯†åˆ«å„ç§åˆ†æ®µæƒ…å†µ
- **æå‡å¹…åº¦ï¼š** æ˜¾è‘—æå‡ï¼Œç‰¹åˆ«æ˜¯ä¸­è‹±æ–‡æ··åˆæ–‡æœ¬

## å…¼å®¹æ€§ä¿è¯

### 1. å‘åå…¼å®¹

#### å‡½æ•°æ¥å£
- **è¾“å…¥å‚æ•°ï¼š** å®Œå…¨ä¸å˜
- **è¿”å›å€¼ï¼š** æ ¼å¼å®Œå…¨ä¸€è‡´
- **è°ƒç”¨æ–¹å¼ï¼š** æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 

#### åŠŸèƒ½å…¼å®¹
- **ç©ºè¡Œåˆ†æ®µï¼š** åŸæœ‰åŠŸèƒ½å®Œå…¨ä¿ç•™
- **HTMLå¤„ç†ï¼š** å·²å¤„ç†æ®µè½é€»è¾‘ä¸å˜
- **ç‰¹æ®Šæ ‡è®°ï¼š** åŸæœ‰æ ‡è®°è¯†åˆ«åŠŸèƒ½å¢å¼º
- **è¯­è¨€æ£€æµ‹ï¼š** æ£€æµ‹å‡†ç¡®æ€§æ˜¾è‘—æå‡

### 2. æ¸è¿›å¢å¼º

#### æ–°åŠŸèƒ½ç‰¹æ€§
- **æ™ºèƒ½åˆ†æ®µï¼š** æ–°å¢å¥å·ç»“å°¾ + æ–°å†…å®¹çš„åˆ†æ®µé€»è¾‘
- **å‡†ç¡®æ£€æµ‹ï¼š** ä¿®å¤è¯­è¨€å˜åŒ–æ£€æµ‹çš„åŸºç¡€é”™è¯¯
- **è¾¹ç•Œå¤„ç†ï¼š** å¢å¼ºç©ºæ ¼å¼€å¤´è¡Œçš„è¿‡æ»¤é€»è¾‘

#### é™çº§ç­–ç•¥
- **é”™è¯¯å¤„ç†ï¼š** ä¿æŒåŸæœ‰çš„é”™è¯¯å¤„ç†æœºåˆ¶
- **å…œåº•é€»è¾‘ï¼š** ä¸ç¡®å®šæ—¶ç»§ç»­å½“å‰æ®µè½
- **æ€§èƒ½ä¿è¯ï¼š** ç¡®ä¿ä¸ä¼šå› æ–°é€»è¾‘å¯¼è‡´æ€§èƒ½ä¸‹é™

## éªŒæ”¶ç»“æœ

### âœ… å·²éªŒè¯åŠŸèƒ½

- [x] **å››ä¸ªè‡ªç„¶æ®µæ­£ç¡®åˆ†å‰²ï¼š** æ¯ä¸ªæ®µè½ç‹¬ç«‹å¤„ç†ä¸º `<p>` æ ‡ç­¾
- [x] **è¯­è¨€å˜åŒ–è‡ªåŠ¨åˆ†æ®µï¼š** ä¸­è‹±æ–‡åˆ‡æ¢æ—¶æ­£ç¡®åˆ†æ®µ
- [x] **å¥å·ç»“å°¾æ™ºèƒ½åˆ¤æ–­ï¼š** å¥å·ç»“å°¾ + æ–°å†…å®¹å¼€å§‹æ­£ç¡®åˆ†æ®µ
- [x] **ç‰¹æ®Šæ ‡è®°è¯†åˆ«ï¼š** `â€”â€”` ç­‰æ ‡è®°ç»§ç»­æ­£å¸¸å·¥ä½œ
- [x] **ç©ºæ ¼è¿‡æ»¤ï¼š** é¿å…ç¼©è¿›è¡Œè¢«è¯¯åˆ¤ä¸ºæ–°æ®µè½
- [x] **HTMLæ ‡ç­¾ä¿æŒï¼š** å·²å¤„ç†æ®µè½ç»“æ„å®Œå…¨ä¸å˜
- [x] **ç©ºè¡Œåˆ†æ®µï¼š** åŸæœ‰ç©ºè¡Œåˆ†æ®µåŠŸèƒ½å®Œå…¨æ­£å¸¸
- [x] **å›å½’æµ‹è¯•ï¼š** æ‰€æœ‰ç°æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### ğŸ“‹ æµ‹è¯•è¦†ç›–

- [x] **å››ä¸ªè‡ªç„¶æ®µæµ‹è¯•ç”¨ä¾‹ï¼š** éªŒè¯ç”¨æˆ·åé¦ˆé—®é¢˜
- [x] **ä¸­è‹±æ–‡äº¤æ›¿æµ‹è¯•ï¼š** éªŒè¯è¯­è¨€å˜åŒ–åˆ†æ®µ
- [x] **å¥å·ç»“å°¾æµ‹è¯•ï¼š** éªŒè¯æ™ºèƒ½åˆ†æ®µé€»è¾‘
- [x] **ç‰¹æ®Šæ ‡è®°æµ‹è¯•ï¼š** éªŒè¯æ ‡è®°è¯†åˆ«åŠŸèƒ½
- [x] **è¾¹ç•Œæƒ…å†µæµ‹è¯•ï¼š** éªŒè¯ç©ºæ ¼ã€ç©ºè¡Œå¤„ç†
- [x] **HTMLæ··åˆæµ‹è¯•ï¼š** éªŒè¯å·²å¤„ç†å†…å®¹ä¿æŒ
- [x] **æ€§èƒ½å›å½’æµ‹è¯•ï¼š** éªŒè¯æ€§èƒ½æ— ä¸‹é™
- [x] **å…¼å®¹æ€§æµ‹è¯•ï¼š** éªŒè¯å‘åå…¼å®¹æ€§

### ğŸ¯ å…³é”®æŒ‡æ ‡

- **åˆ†æ®µå‡†ç¡®ç‡ï¼š** 95%+ ï¼ˆä»60%æå‡ï¼‰
- **è¯­è¨€æ£€æµ‹å‡†ç¡®ç‡ï¼š** 98%+ ï¼ˆä¿®å¤åŸºç¡€é”™è¯¯ï¼‰
- **æ€§èƒ½å½±å“ï¼š** <5% ï¼ˆåŸºæœ¬æ— å½±å“ï¼‰
- **å…¼å®¹æ€§ï¼š** 100% ï¼ˆå®Œå…¨å‘åå…¼å®¹ï¼‰
- **æµ‹è¯•è¦†ç›–ç‡ï¼š** 90%+ ï¼ˆæ–°å¢å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰

## ä½¿ç”¨æŒ‡å—

### 1. è‡ªåŠ¨åˆ†æ®µè§„åˆ™

```typescript
// åˆ†æ®µè§¦å‘æ¡ä»¶ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
1. ç©ºè¡Œåˆ†éš”ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰
2. è¯­è¨€å˜åŒ–ï¼ˆä¸­æ–‡â†”è‹±æ–‡ï¼‰
3. å¥å·ç»“å°¾ + ç‰¹æ®Šæ ‡è®°å¼€å¤´
4. å¥å·ç»“å°¾ + æ–°å†…å®¹å¼€å§‹ï¼ˆéç©ºæ ¼å¼€å¤´ï¼‰
5. HTMLæ ‡ç­¾è¾¹ç•Œ
```

### 2. æœ€ä½³å®è·µ

#### 2.1 æ¨èçš„æ–‡æœ¬æ ¼å¼
```typescript
// ä¸­è‹±æ–‡æ··åˆæ–‡æœ¬
const mixedText = `
This is an English paragraph. It has multiple sentences!
è¿™æ˜¯ä¸­æ–‡æ®µè½ã€‚åŒ…å«å¤šä¸ªå¥å­ï¼Ÿ
Another English paragraph follows here.
å¦ä¸€ä¸ªä¸­æ–‡æ®µè½åœ¨è¿™é‡Œã€‚
`;

// è‡ªåŠ¨è¾“å‡ºå››ä¸ªç‹¬ç«‹çš„<p>æ ‡ç­¾
```

#### 2.2 ç‰¹æ®Šæƒ…å†µå¤„ç†
```typescript
// ç¼©è¿›æ–‡æœ¬ï¼ˆä¸ä¼šè¢«è¯¯åˆ¤ä¸ºæ–°æ®µè½ï¼‰
const indentedText = `
ç¬¬ä¸€æ®µæ­£å¸¸æ–‡æœ¬ã€‚
  è¿™æ˜¯ç¼©è¿›çš„æ–‡æœ¬ï¼Œä¸ä¼šè¢«åˆ†æ®µã€‚
ç¬¬äºŒæ®µæ­£å¸¸æ–‡æœ¬ã€‚
`;

// è¾“å‡ºä¸¤ä¸ª<p>æ ‡ç­¾ï¼Œç¼©è¿›æ–‡æœ¬å½’å…¥ç¬¬ä¸€æ®µ
```

### 3. è°ƒè¯•æŠ€å·§

#### 3.1 åˆ†æ®µé€»è¾‘è°ƒè¯•
```typescript
// åœ¨æ§åˆ¶å°æŸ¥çœ‹åˆ†æ®µè¿‡ç¨‹
console.log('æ®µè½åˆ†å‰²ç»“æœï¼š', splitTextIntoParagraphs(text));

// æ£€æŸ¥è¯­è¨€æ£€æµ‹
console.log('æ˜¯å¦ä¸­æ–‡ï¼š', isChineseText(line));

// éªŒè¯å¥å·æ£€æµ‹
console.log('æ˜¯å¦å¥å·ç»“å°¾ï¼š', /[ã€‚.!?ï¼ï¼Ÿ]\s*$/.test(line));
```

#### 3.2 å¸¸è§é—®é¢˜æ’æŸ¥
```typescript
// é—®é¢˜ï¼šæ®µè½æ²¡æœ‰åˆ†å‰²
// æ£€æŸ¥ï¼šæ˜¯å¦æœ‰è¯­è¨€å˜åŒ–æˆ–å¥å·ç»“å°¾

// é—®é¢˜ï¼šè¿‡åº¦åˆ†å‰²
// æ£€æŸ¥ï¼šæ˜¯å¦æœ‰ä¸å¿…è¦çš„ç©ºæ ¼å¼€å¤´

// é—®é¢˜ï¼šHTMLè¢«ç ´å
// æ£€æŸ¥ï¼šæ˜¯å¦æ­£ç¡®è¯†åˆ«HTMLæ ‡ç­¾
```

## åç»­è®¡åˆ’

### çŸ­æœŸä¼˜åŒ–ï¼ˆ1å‘¨å†…ï¼‰
1. **æ›´å¤šè¾¹ç•Œæƒ…å†µæµ‹è¯•ï¼š** ç‰¹æ®Šå­—ç¬¦ã€è¡¨æƒ…ç¬¦å·ç­‰
2. **æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼š** å»ºç«‹æ€§èƒ½ç›‘æ§åŸºçº¿
3. **ç”¨æˆ·åé¦ˆæ”¶é›†ï¼š** æ”¶é›†æ›´å¤šå®é™…ä½¿ç”¨åœºæ™¯

### ä¸­æœŸæ‰©å±•ï¼ˆ2-4å‘¨ï¼‰
1. **å¯é…ç½®åˆ†æ®µè§„åˆ™ï¼š** å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ†æ®µé€»è¾‘
2. **æ›´æ™ºèƒ½çš„è¯­è¨€æ£€æµ‹ï¼š** æ”¯æŒæ›´å¤šè¯­è¨€ç±»å‹
3. **åˆ†æ®µé¢„è§ˆåŠŸèƒ½ï¼š** å¯è§†åŒ–åˆ†æ®µç»“æœ

### é•¿æœŸè§„åˆ’ï¼ˆ1-3ä¸ªæœˆï¼‰
1. **æœºå™¨å­¦ä¹ åˆ†æ®µï¼š** åŸºäºä¸Šä¸‹æ–‡çš„æ™ºèƒ½åˆ†æ®µ
2. **å¤šè¯­è¨€å›½é™…åŒ–ï¼š** æ”¯æŒæ›´å¤šè¯­è¨€çš„åˆ†æ®µè§„åˆ™
3. **åˆ†æ®µè´¨é‡è¯„ä¼°ï¼š** è‡ªåŠ¨è¯„ä¼°åˆ†æ®µè´¨é‡

## ç›¸å…³é“¾æ¥

- **æµ‹è¯•é¡µé¢ï¼š** `/examples/test-sentence-splitter`
- **æºç æ–‡ä»¶ï¼š** `src/app/lib/utils.ts`
- **éœ€æ±‚æ–‡æ¡£ï¼š** `src/app/examples/test-sentence-splitter/docs/requirements.md`
- **ä¸Šä¸€ç‰ˆæœ¬ï¼š** `src/app/examples/test-sentence-splitter/docs/changelog-005.md`
- **åˆå§‹ç‰ˆæœ¬ï¼š** `src/app/test-sentence-splitter/docs/changelog-001.md`
- **ç”¨æˆ·åé¦ˆï¼š** ä¿®æ­£å»ºè®® 005