# TipTap 自定义编辑器示例需求文档

## 项目概述
使用 TipTap 编辑器创建一个富文本编辑器示例，支持用户编辑具有自定义属性的 HTML 内容。

## 核心功能需求

### 1. HTML 结构支持
- 支持最外层为 `div` 或 `p` 元素的容器
- 内部包含多个 `span` 元素
- 每个 `span` 元素支持三个自定义属性：
  - `data-speaker`: 说话者标识
  - `aria-label`: 无障碍标签文本
  - `data-voice-id`: 语音ID

### 2. 属性编辑功能
- 提供对话框界面独立编辑 span 属性
- 支持选中现有 span 进行属性修改
- `aria-label` 内容在保存读取时处理双引号(")，以免影响属性正常读取

### 3. 数据持久化
- HTML 数据存储在后台
- 支持保存和读取功能
- 保持原始 HTML 结构和属性

### 4. 用户交互
- 工具栏提供快捷操作按钮
- 支持添加新容器（div/p）
- 支持编辑选中的 span 元素
- 实时 HTML 预览功能

## 技术实现要点

### 1. TipTap 自定义扩展
- 创建 `CustomSpan` 扩展处理 span 元素及其属性
- 创建 `CustomContainer` 扩展处理 div/p 容器
- 实现正确的 HTML 解析和渲染逻辑

### 2. 双引号处理
- `aria-label` 属性值进行转义处理
- 防止双引号破坏 HTML 属性结构

### 3. UI 组件
- 使用 Radix UI 和 Tailwind CSS
- 对话框组件用于属性编辑
- 表单输入组件支持各属性编辑

## 示例数据格式
```html
<div><span aria-label="—— 我们往往自信站得足够近，占尽了先天的优势，但其实也不过
