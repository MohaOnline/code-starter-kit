(()=>{"use strict";const e={};"undefined"!=typeof lpDataAdmin&&(e.admin={apiAdminNotice:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/admin-notices",apiAdminOrderStatic:lpDataAdmin.lp_rest_url+"lp/v1/orders/statistic",apiAddons:lpDataAdmin.lp_rest_url+"lp/v1/addon/all",apiAddonAction:lpDataAdmin.lp_rest_url+"lp/v1/addon/action",apiSearchCourses:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-course",apiAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/assign-user-course"}),"undefined"!=typeof lpData&&(e.frontend={apiWidgets:lpData.lp_rest_url+"lp/v1/widgets/api",apiCourses:lpData.lp_rest_url+"lp/v1/courses/archive-course"});const t=e;function a(){const e=document.querySelectorAll(".learnpress-widget-wrapper");if(!e.length)return;e.forEach((e=>{e.classList.contains("learnpress-widget-wrapper__restapi")&&(e=>{const a=e.dataset.widget?JSON.parse(e.dataset.widget):"",s=t.frontend.apiWidgets,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,params_url:lpData.urlParams})};0!==parseInt(lpData.user_id)&&(n.headers["X-WP-Nonce"]=lpData.nonce),((e,t={},a={})=>{"function"==typeof a.before&&a.before(),fetch(e,{method:"GET",...t}).then((e=>e.json())).then((e=>{"function"==typeof a.success&&a.success(e)})).catch((e=>{"function"==typeof a.error&&a.error(e)})).finally((()=>{"function"==typeof a.completed&&a.completed()}))})(s,n,{before:()=>{},success:t=>{const{data:a,status:s,message:n}=t;a&&"success"===s?e.insertAdjacentHTML("afterbegin",a):n&&e.insertAdjacentHTML("afterbegin",`<div class="lp-ajax-message error" style="display:block">${n}</div>`)},error:e=>{},completed:()=>{delete e.dataset.widget,e.querySelector(".lp-skeleton-animation").remove()}})})(e)}))}document.addEventListener("DOMContentLoaded",(function(e){a()}))})();