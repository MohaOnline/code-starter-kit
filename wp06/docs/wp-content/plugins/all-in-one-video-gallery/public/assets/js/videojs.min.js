!function(e){"use strict";function t(e){for(var t="",n=e.split(/\n/);n.length>3;){for(var a=3;a<n.length;a++)n[2]+="\n"+n[a];n.splice(3,n.length-3)}var o=0;if(!n[0].match(/\d+:\d+:\d+/)&&n[1].match(/\d+:\d+:\d+/)&&(t+=n[0].match(/\w+/)+"\n",o+=1),!n[o].match(/\d+:\d+:\d+/))return"";var r=n[1].match(/(\d+):(\d+):(\d+)(?:,(\d+))?\s*--?>\s*(\d+):(\d+):(\d+)(?:,(\d+))?/);return r?(t+=r[1]+":"+r[2]+":"+r[3]+"."+r[4]+" --> "+r[5]+":"+r[6]+":"+r[7]+"."+r[8]+"\n",n[o+=1]&&(t+=n[o]+"\n\n"),t):""}function n(e,n,a){var o;(o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==o.readyState&&200==o.status&&o.responseText){var r=function e(n){var a=n.replace(/\r+/g,""),o=(a=a.replace(/^\s+|\s+$/g,"")).split("\n\n"),r="";if(o.length>0){r+="WEBVTT\n\n";for(var s=0;s<o.length;s+=1)r+=t(o[s])}return r}(o.responseText);if(""!=r){var s=new Blob([r],{type:"text/vtt"}),i={kind:"subtitles",src:URL.createObjectURL(s),label:n.label,srclang:n.srclang};""!=a&&(i.mode=a),e.addRemoteTextTrack(i,!0)}}},o.open("GET",n.src,!0),o.send()}function a(t){if("aiovg_videos"==t.post_type){var n={action:"aiovg_update_views_count",post_id:t.post_id,security:aiovg_player.ajax_nonce};e.post(aiovg_player.ajax_url,n,function(e){})}}window.onmessage=function(t){"aiovg-cookie-consent"==t.data&&e(".aiovg-player-iframe iframe").each(function(){var t=e(this).attr("src");if(-1===t.indexOf("refresh=1")){var n=t.indexOf("?")>-1?"&":"?";e(this).attr("src",t+n+"refresh=1")}})},e(function(){e(".aiovg-player-raw").each(function(){var t;a(e(this).data("params"))}),e(".aiovg-player-standard").each(function(){var t,o,r,s;o=(t=e(this)).data("id"),r=t.data("params"),s=function(){r.player.html5={vhs:{overrideNative:!videojs.browser.IS_ANY_SAFARI}};var s=videojs(o,r.player),i=[],l=!1,c={id:o,player_id:o,config:r,settings:r,player:s};t.trigger("player.init",c),s.ready(function(){t.removeClass("vjs-waiting"),t.find(".vjs-big-play-button").one("click",function(){l||t.addClass("vjs-waiting")})}),s.one("loadedmetadata",function(){if(t.find(".vjs-quality-selector .vjs-menu-item").each(function(t){var n=e(this),a=n.find(".vjs-menu-item-text").html().replace(/\D/g,"");a>=2160?n.append('<span class="vjs-quality-menu-item-sub-label">4K</span>'):a>=720&&n.append('<span class="vjs-quality-menu-item-sub-label">HD</span>')}),r.hasOwnProperty("tracks"))for(var a=0,o=r.tracks.length;a<o;a++){var i=r.tracks[a],l="";if(0==a&&1==r.cc_load_policy&&(l="showing"),/srt/.test(i.src.toLowerCase()))n(s,i,l);else{var c={kind:"subtitles",src:i.src,label:i.label,srclang:i.srclang};""!=l&&(c.mode=l),s.addRemoteTextTrack(c,!0)}}}),s.one("play",function(n){l=!0,t.removeClass("vjs-waiting"),a(r),e(".aiovg-player-standard").trigger("playRequested",{player_id:o})}),t.on("playRequested",function(e,t){o!=t.player_id&&s.pause()}),s.on("playing",function(){s.trigger("controlsshown")}),s.on("ended",function(){s.trigger("controlshidden")}),s.on("qualitySelected",function(e,t){var n=t.label.replace(/\D/g,"");s.removeClass("vjs-4k"),s.removeClass("vjs-hd"),n>=2160?s.addClass("vjs-4k"):n>=720&&s.addClass("vjs-hd")});var d=s.src();(/.m3u8/.test(d)||/.mpd/.test(d))&&-1!==r.player.controlBar.children.indexOf("qualitySelector")&&s.qualityMenu();var p={};if(r.hasOwnProperty("start")&&(p.start=r.start),r.hasOwnProperty("end")&&(p.end=r.end),Object.keys(p).length>1&&(p.restart_beginning=!1,s.offset(p)),(r.hasOwnProperty("share")||r.hasOwnProperty("embed"))&&i.push({content:'<button type="button" class="vjs-share-embed-button" title="Share"><span class="vjs-icon-share" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Share</span></button>',class:"vjs-share",align:"top-right",start:"controlsshown",end:"controlshidden",showBackground:!1}),r.hasOwnProperty("download")){var g="vjs-download";(r.hasOwnProperty("share")||r.hasOwnProperty("embed"))&&(g+=" vjs-has-share"),i.push({content:'<a href="'+r.download.url+'" class="vjs-download-button" title="Download" target="_blank" style="text-decoration:none;"><span class="aiovg-icon-download" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Download</span></a>',class:g,align:"top-right",start:"controlsshown",end:"controlshidden",showBackground:!1})}if(r.hasOwnProperty("logo")){var v=[];v.src=r.logo.image,r.logo.margin&&(r.logo.margin=r.logo.margin-5);var u="bottom-left";switch(v.style="margin: "+r.logo.margin+"px;",r.logo.position){case"topleft":u="top-left",v.style="margin: "+r.logo.margin+"px;";break;case"topright":u="top-right",v.style="margin: "+r.logo.margin+"px;";break;case"bottomright":u="bottom-right",v.style="margin: "+r.logo.margin+"px;"}var f="<img "+function e(t){var n="";for(var a in t)n+=a+'="'+t[a]+'" ';return n}(v)+' alt="" />';r.logo.link&&(f='<a href="'+r.logo.link+'" style="text-decoration:none;">'+f+"</a>"),i.push({content:f,class:"vjs-logo",align:u,start:"controlsshown",end:"controlshidden",showBackground:!1})}if(i.length>0){if(s.overlay({content:"",overlays:i}),r.hasOwnProperty("share")||r.hasOwnProperty("embed")){var c={};c.content=t.find(".vjs-share-embed").get(0),c.temporary=!1;var h=new(videojs.getComponent("ModalDialog"))(s,c);h.addClass("vjs-modal-dialog-share-embed"),s.addChild(h);var y=!0;t.find(".vjs-share-embed-button").on("click",function(){y=!s.paused,h.open()}),h.on("modalclose",function(){y&&s.play()})}r.hasOwnProperty("embed")&&t.find(".vjs-copy-embed-code").on("focus",function(){e(this).select(),document.execCommand("copy")})}if(r.hotkeys&&s.hotkeys(),r.hasOwnProperty("contextmenu")){e("#aiovg-contextmenu").length||e("body").append('<div id="aiovg-contextmenu" style="display: none;"><div class="aiovg-contextmenu-content">'+r.contextmenu.content+"</div></div>");var m=document.getElementById("aiovg-contextmenu"),w="";e("#"+o).on("contextmenu",function(e){if(3===e.keyCode||3===e.which){e.preventDefault(),e.stopPropagation();var t=m.offsetWidth,n=m.offsetHeight,a=e.pageX,o=e.pageY,r=document.documentElement,s=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0),i=(window.pageYOffset||r.scrollTop)-(r.clientTop||0),l=a+t>window.innerWidth+s?a-t:a,c=o+n>window.innerHeight+i?o-n:o;m.style.display="",m.style.left=l+"px",m.style.top=c+"px",clearTimeout(w),w=setTimeout(function(){m.style.display="none"},1500)}}),document.addEventListener("click",function(){m.style.display="none"})}},r.cookie_consent?(t.find(".aiovg-privacy-consent-button").on("click",function(){var n;e(this).html("..."),r.player.autoplay=!0,n={action:"aiovg_set_cookie",security:aiovg_player.ajax_nonce},e.post(aiovg_player.ajax_url,n,function(e){}),s(),t.find(".aiovg-privacy-wrapper").remove(),e(".aiovg-player-standard").trigger("cookieConsent"),e(".aiovg-player-element").removeAttr("cookieconsent")}),t.on("cookieConsent",function(e,n){t.find(".aiovg-privacy-wrapper").length>0&&(s(),t.find(".aiovg-privacy-wrapper").remove())})):s()}),"undefined"!=typeof videojs&&videojs.hook("beforeerror",function(e,t){var n=e.error();if(null===t)return n;if(2==t.code||4==t.code){var a=e.src();if(/.m3u8/.test(a)||/.mpd/.test(a))return{code:t.code,message:aiovg_player.i18n.stream_not_found}}return t})})}(jQuery);